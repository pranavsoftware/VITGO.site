const _0x16fcdd=_0x13fb;(function(_0x351335,_0x135745){const _0x36c5ff=_0x13fb,_0x4348d4=_0x351335();while(!![]){try{const _0x1bcc1b=-parseInt(_0x36c5ff(0x18b))/0x1+parseInt(_0x36c5ff(0x1a2))/0x2*(parseInt(_0x36c5ff(0x191))/0x3)+parseInt(_0x36c5ff(0x143))/0x4+-parseInt(_0x36c5ff(0x154))/0x5*(-parseInt(_0x36c5ff(0x17a))/0x6)+-parseInt(_0x36c5ff(0x1a0))/0x7*(parseInt(_0x36c5ff(0x185))/0x8)+parseInt(_0x36c5ff(0x18d))/0x9*(-parseInt(_0x36c5ff(0x17b))/0xa)+parseInt(_0x36c5ff(0x17e))/0xb*(-parseInt(_0x36c5ff(0x140))/0xc);if(_0x1bcc1b===_0x135745)break;else _0x4348d4['push'](_0x4348d4['shift']());}catch(_0x1bbcd7){_0x4348d4['push'](_0x4348d4['shift']());}}}(_0x4d2d,0xce496));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js';import{getAuth,onAuthStateChanged,signOut}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js';import{getFirestore,collection,addDoc,getDoc,doc,getDocs}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js';const firebaseConfig={'apiKey':_0x16fcdd(0x183),'authDomain':_0x16fcdd(0x197),'databaseURL':_0x16fcdd(0x17d),'projectId':_0x16fcdd(0x141),'storageBucket':_0x16fcdd(0x153),'messagingSenderId':_0x16fcdd(0x194),'appId':'1:621065707054:web:8b47875a751d361f2e09bf'},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);onAuthStateChanged(auth,async _0x2020bd=>{const _0xf725cb=_0x16fcdd;_0x2020bd?(document[_0xf725cb(0x186)](_0xf725cb(0x179))[_0xf725cb(0x15c)]=_0x2020bd[_0xf725cb(0x16c)]||_0x2020bd[_0xf725cb(0x182)],await fetchCurrentBooking(_0x2020bd[_0xf725cb(0x149)])):window['location']['href']='../face/Index.html';});async function fetchCurrentBooking(_0x3deb1b){const _0x2abd66=_0x16fcdd;try{const _0x20b85b=await getDocs(collection(db,'bookings'));_0x20b85b[_0x2abd66(0x14a)](_0xd67ae8=>{const _0x27e2a8=_0xd67ae8['data']();_0x27e2a8['userId']===_0x3deb1b&&displayCurrentBooking(_0x27e2a8,_0xd67ae8['id']);});}catch(_0x41e6a3){console[_0x2abd66(0x147)]('Error\x20fetching\x20current\x20booking:',_0x41e6a3);}}function displayCurrentBooking(_0x36d943,_0x32745b){const _0x22b34e=_0x16fcdd,_0x29113b=document[_0x22b34e(0x186)](_0x22b34e(0x16e));_0x29113b[_0x22b34e(0x184)]=_0x22b34e(0x159)+_0x32745b+')</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Car:\x20'+_0x36d943[_0x22b34e(0x14d)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>From:\x20'+_0x36d943['from']+_0x22b34e(0x196)+_0x36d943['to']+_0x22b34e(0x190)+_0x36d943[_0x22b34e(0x193)]+_0x22b34e(0x14b)+_0x36d943['time']+_0x22b34e(0x164)+_0x36d943[_0x22b34e(0x18c)]+_0x22b34e(0x169)+(_0x36d943['message']||_0x22b34e(0x187))+_0x22b34e(0x171);}document[_0x16fcdd(0x186)](_0x16fcdd(0x14f))[_0x16fcdd(0x160)](_0x16fcdd(0x180),async _0x543ccc=>{const _0x1d7be4=_0x16fcdd;_0x543ccc['preventDefault']();const _0x32e4fe=document[_0x1d7be4(0x186)](_0x1d7be4(0x14d))[_0x1d7be4(0x14e)],_0x4af7c6=parseInt(document[_0x1d7be4(0x186)](_0x1d7be4(0x175))['value'],0xa),_0x2556ff=document[_0x1d7be4(0x186)](_0x1d7be4(0x158))['value'],_0x3ab809=document[_0x1d7be4(0x186)]('to')[_0x1d7be4(0x14e)],_0x574dd6=document['getElementById'](_0x1d7be4(0x193))[_0x1d7be4(0x14e)],_0x4fb697=document[_0x1d7be4(0x186)](_0x1d7be4(0x16a))[_0x1d7be4(0x14e)],_0x548051=document['getElementById']('paymentMode')[_0x1d7be4(0x14e)],_0x3e407d=document[_0x1d7be4(0x186)](_0x1d7be4(0x16d))[_0x1d7be4(0x14e)],_0x39807a=getMaxStudents(_0x32e4fe);if(_0x4af7c6>_0x39807a){alert('You\x20can\x20select\x20a\x20maximum\x20of\x20'+_0x39807a+'\x20students\x20for\x20a\x20'+_0x32e4fe+'.');return;}const _0x358ec2=new Date(),_0x129d01=new Date(_0x574dd6),_0x1f5370=new Date(_0x574dd6+'T'+_0x4fb697);if(_0x129d01<_0x358ec2||_0x129d01['toDateString']()===_0x358ec2[_0x1d7be4(0x198)]()&&_0x1f5370<_0x358ec2){alert(_0x1d7be4(0x150));return;}try{const _0x5c66f7=await addDoc(collection(db,_0x1d7be4(0x195)),{'car':_0x32e4fe,'noOfStudents':_0x4af7c6,'from':_0x2556ff,'to':_0x3ab809,'date':_0x574dd6,'time':_0x4fb697,'paymentMode':_0x548051,'message':_0x3e407d,'userId':auth[_0x1d7be4(0x157)][_0x1d7be4(0x149)],'timestamp':new Date()});alert('Booking\x20successful!\x20Booking\x20ID:\x20'+_0x5c66f7['id']),displayCurrentBooking({'car':_0x32e4fe,'from':_0x2556ff,'to':_0x3ab809,'date':_0x574dd6,'time':_0x4fb697,'paymentMode':_0x548051,'message':_0x3e407d},_0x5c66f7['id']);}catch(_0x4aede3){console['error'](_0x1d7be4(0x174),_0x4aede3),alert(_0x1d7be4(0x19f));}});function getMaxStudents(_0x500b5c){const _0x1c9923=_0x16fcdd;switch(_0x500b5c){case _0x1c9923(0x14c):case _0x1c9923(0x163):return 0x4;case'Innova':return 0x7;default:return 0x0;}}document['getElementById'](_0x16fcdd(0x19c))[_0x16fcdd(0x160)](_0x16fcdd(0x15a),async()=>{const _0x260ac4=_0x16fcdd,_0x512033=document[_0x260ac4(0x186)](_0x260ac4(0x177))[_0x260ac4(0x14e)][_0x260ac4(0x165)]();if(!_0x512033){alert(_0x260ac4(0x199));return;}const _0x4e2751=doc(db,_0x260ac4(0x195),_0x512033),_0xa1a73f=await getDoc(_0x4e2751);if(_0xa1a73f['exists']()){const _0xb2f4b1=_0xa1a73f['data']();displayDriverDetails(_0xb2f4b1);}else alert('No\x20booking\x20found\x20with\x20this\x20ID.');});function displayDriverDetails(_0x9fcf3c){const _0x2f27bc=_0x16fcdd,_0x36df6d=document[_0x2f27bc(0x186)](_0x2f27bc(0x15b)),_0x45ec82=_0x9fcf3c['driverDetails']&&_0x9fcf3c[_0x2f27bc(0x152)][_0x2f27bc(0x145)]?formatTime(_0x9fcf3c[_0x2f27bc(0x152)][_0x2f27bc(0x145)]):_0x2f27bc(0x15d),_0x311ce5=_0x9fcf3c[_0x2f27bc(0x152)]?.[_0x2f27bc(0x144)]||_0x2f27bc(0x15d);_0x36df6d[_0x2f27bc(0x184)]=_0x2f27bc(0x142)+(_0x9fcf3c[_0x2f27bc(0x152)]?.['driverName']||'N/A')+_0x2f27bc(0x19b)+(_0x9fcf3c[_0x2f27bc(0x152)]?.[_0x2f27bc(0x168)]||_0x2f27bc(0x15d))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Cab\x20Name:\x20'+(_0x9fcf3c[_0x2f27bc(0x152)]?.[_0x2f27bc(0x15f)]||_0x2f27bc(0x15d))+_0x2f27bc(0x19a)+(_0x9fcf3c[_0x2f27bc(0x152)]?.[_0x2f27bc(0x156)]||_0x2f27bc(0x15d))+_0x2f27bc(0x192)+_0x45ec82+_0x2f27bc(0x18e)+_0x311ce5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Message:\x20'+(_0x9fcf3c[_0x2f27bc(0x152)]?.['message']||_0x2f27bc(0x187))+_0x2f27bc(0x171);}function formatTime(_0x2d6870){const _0x56b439=_0x16fcdd;if(!_0x2d6870)return'N/A';const [_0x4061b4,_0x3c86ac]=_0x2d6870[_0x56b439(0x19d)](':'),_0x544a94=parseInt(_0x4061b4,0xa),_0x2a9bd6=_0x544a94>=0xc?'PM':'AM',_0x543414=_0x544a94%0xc||0xc;return String(_0x543414)['padStart'](0x2,'0')+':'+String(_0x3c86ac)[_0x56b439(0x170)](0x2,'0')+'\x20'+_0x2a9bd6;}const html5QrCode=new Html5Qrcode('reader');async function checkCameraPermissions(){const _0x47076c=_0x16fcdd;try{const _0x19cc56=await navigator[_0x47076c(0x178)]['getUserMedia']({'video':!![]});_0x19cc56['getTracks']()['forEach'](_0xa9ae4=>_0xa9ae4[_0x47076c(0x176)]()),startScanning();}catch(_0x2ec602){console['error']('Camera\x20permissions\x20denied:',_0x2ec602),alert('Please\x20allow\x20camera\x20access\x20to\x20scan\x20QR\x20codes.'),_0x2ec602[_0x47076c(0x151)]==='NotAllowedError'&&alert(_0x47076c(0x189));}}document[_0x16fcdd(0x186)]('startScanBtn')[_0x16fcdd(0x160)]('click',startScanning);async function startScanning(){const _0x5f3df1=_0x16fcdd;try{await html5QrCode['start']({'facingMode':_0x5f3df1(0x17f)},{'fps':0xa,'qrbox':0xfa},qrCodeSuccessCallback),document[_0x5f3df1(0x186)](_0x5f3df1(0x16b))[_0x5f3df1(0x18a)][_0x5f3df1(0x188)]='none',document['getElementById'](_0x5f3df1(0x19e))['style']['display']=_0x5f3df1(0x18f);}catch(_0x4c126c){console['error'](_0x5f3df1(0x1a1),_0x4c126c);}}function qrCodeSuccessCallback(_0x2d8c51,_0x13bd6f){const _0x4c7528=_0x16fcdd;document[_0x4c7528(0x186)](_0x4c7528(0x173))[_0x4c7528(0x15c)]='Scanned\x20QR\x20Code:\x20'+_0x2d8c51;}document[_0x16fcdd(0x186)](_0x16fcdd(0x19e))['addEventListener'](_0x16fcdd(0x15a),stopScanning);function _0x13fb(_0x42f2b1,_0x5e3fd1){const _0x4d2d52=_0x4d2d();return _0x13fb=function(_0x13fbbd,_0x23f4c5){_0x13fbbd=_0x13fbbd-0x13f;let _0x47b1e8=_0x4d2d52[_0x13fbbd];return _0x47b1e8;},_0x13fb(_0x42f2b1,_0x5e3fd1);}function _0x4d2d(){const _0x143142=['4598656pFXJCH','getElementById','No\x20message\x20provided','display','To\x20change\x20your\x20camera\x20settings,\x20go\x20to\x20your\x20browser\x20settings\x20and\x20allow\x20camera\x20access\x20for\x20this\x20site.','style','1069648tYesxc','paymentMode','9117gmkDRk','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Amount:\x20','block','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Date:\x20','6pdKeMx','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Estimated\x20Pick\x20Time:\x20','date','621065707054','bookings','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>To:\x20','easycab-71fcf.firebaseapp.com','toDateString','Please\x20enter\x20a\x20valid\x20Booking\x20ID.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Taxi\x20Number:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Phone:\x20','viewDriverDetailsBtn','split','stopScanBtn','There\x20was\x20an\x20error\x20while\x20booking.\x20Please\x20try\x20again.','7dYrCdF','Error\x20starting\x20QR\x20code\x20scanning.','568622VdcWbO','../face/Index.html','972aUNDqR','easycab-71fcf','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4>Driver\x20Details</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Driver\x20Name:\x20','6430624tWqufK','amount','estimatedPickTime','profilePic','error','location','uid','forEach','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Time:\x20','Tata\x20Zest','car','value','booking-form','You\x20cannot\x20book\x20a\x20taxi\x20for\x20the\x20past\x20date\x20and\x20time.','name','driverDetails','easycab-71fcf.appspot.com','24740AMTFnp','textContent','taxiNumber','currentUser','from','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4>Current\x20Booking\x20(ID:\x20','click','driver-info','innerText','N/A','John\x20Doe','cabName','addEventListener','Error\x20stopping\x20QR\x20code\x20scanning.','logoutBtn','Dzire','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Payment\x20Mode:\x20','trim','johndoe@example.com','src','phone','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Message:\x20','time','startScanBtn','displayName','message','current-booking','driver-profile-pic','padStart','</p>\x0a\x20\x20\x20\x20','https://example.com/path-to-profile-pic.jpg','scan-result','Error\x20adding\x20document:\x20','noOfStudents','stop','bookingIdInput','mediaDevices','username','1896YwuaHn','6050YaEsmT','Error\x20signing\x20out:','https://easycab-71fcf-default-rtdb.firebaseio.com','86581XVwRmz','environment','submit','driver-email','email','AIzaSyCDD_suBufBLAXzLjV0YPoIq1XU_nOVaBQ','innerHTML'];_0x4d2d=function(){return _0x143142;};return _0x4d2d();}async function stopScanning(){const _0x1f21df=_0x16fcdd;try{await html5QrCode[_0x1f21df(0x176)](),document['getElementById']('stopScanBtn')[_0x1f21df(0x18a)][_0x1f21df(0x188)]='none',document[_0x1f21df(0x186)]('startScanBtn')[_0x1f21df(0x18a)][_0x1f21df(0x188)]=_0x1f21df(0x18f);}catch(_0x11f26f){console['error'](_0x1f21df(0x161),_0x11f26f);}}document[_0x16fcdd(0x186)](_0x16fcdd(0x162))[_0x16fcdd(0x160)](_0x16fcdd(0x15a),async()=>{const _0x51a24c=_0x16fcdd;try{await signOut(auth),window[_0x51a24c(0x148)]['href']=_0x51a24c(0x13f);}catch(_0x4da4da){console['error'](_0x51a24c(0x17c),_0x4da4da);}}),checkCameraPermissions(),document[_0x16fcdd(0x186)](_0x16fcdd(0x16b))[_0x16fcdd(0x160)](_0x16fcdd(0x15a),function(){const _0x81f654=_0x16fcdd,_0x2e260d={'name':_0x81f654(0x15e),'email':_0x81f654(0x166),'profilePic':_0x81f654(0x172)};document[_0x81f654(0x186)]('driver-name')['textContent']=_0x2e260d[_0x81f654(0x151)],document['getElementById'](_0x81f654(0x181))[_0x81f654(0x155)]=_0x2e260d[_0x81f654(0x182)],document[_0x81f654(0x186)](_0x81f654(0x16f))[_0x81f654(0x167)]=_0x2e260d[_0x81f654(0x146)],document[_0x81f654(0x186)]('driver-info')[_0x81f654(0x18a)][_0x81f654(0x188)]=_0x81f654(0x18f),document[_0x81f654(0x186)](_0x81f654(0x173))[_0x81f654(0x18a)]['display']='block';});
