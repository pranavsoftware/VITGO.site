const _0x46258f=_0x126e;(function(_0x2e53a2,_0x27ba6d){const _0x418fa5=_0x126e,_0x48b5d5=_0x2e53a2();while(!![]){try{const _0x3f8696=parseInt(_0x418fa5(0x136))/0x1+-parseInt(_0x418fa5(0x102))/0x2+parseInt(_0x418fa5(0x10d))/0x3+-parseInt(_0x418fa5(0xea))/0x4*(-parseInt(_0x418fa5(0xe2))/0x5)+parseInt(_0x418fa5(0x10e))/0x6+parseInt(_0x418fa5(0xfb))/0x7*(-parseInt(_0x418fa5(0x130))/0x8)+parseInt(_0x418fa5(0x13c))/0x9*(-parseInt(_0x418fa5(0xe5))/0xa);if(_0x3f8696===_0x27ba6d)break;else _0x48b5d5['push'](_0x48b5d5['shift']());}catch(_0x3c0f0f){_0x48b5d5['push'](_0x48b5d5['shift']());}}}(_0x451d,0x55bdd));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js';import{getAuth,onAuthStateChanged,signOut}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-auth.js';import{getFirestore,collection,addDoc,getDoc,doc,getDocs}from'https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js';const firebaseConfig={'apiKey':_0x46258f(0xf7),'authDomain':_0x46258f(0xf6),'databaseURL':_0x46258f(0x135),'projectId':'easycab-71fcf','storageBucket':_0x46258f(0x101),'messagingSenderId':_0x46258f(0x11c),'appId':_0x46258f(0x13d)},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);onAuthStateChanged(auth,async _0x551d07=>{const _0x558384=_0x46258f;_0x551d07?(document[_0x558384(0xeb)](_0x558384(0x131))[_0x558384(0x134)]=_0x551d07['displayName']||_0x551d07[_0x558384(0x140)],await fetchCurrentBooking(_0x551d07[_0x558384(0x119)])):window[_0x558384(0x128)][_0x558384(0xdf)]=_0x558384(0xe9);});async function fetchCurrentBooking(_0x41ea60){const _0x1775b1=_0x46258f;try{const _0x266773=await getDocs(collection(db,_0x1775b1(0x139)));_0x266773[_0x1775b1(0x117)](_0x2ac49f=>{const _0x1d770e=_0x1775b1,_0x3f77f0=_0x2ac49f[_0x1d770e(0x10c)]();_0x3f77f0[_0x1d770e(0x122)]===_0x41ea60&&displayCurrentBooking(_0x3f77f0,_0x2ac49f['id']);});}catch(_0x128518){console[_0x1775b1(0x103)]('Error\x20fetching\x20current\x20booking:',_0x128518);}}function displayCurrentBooking(_0x194186,_0xb1ec22){const _0x475237=_0x46258f,_0x3341e4=document['getElementById'](_0x475237(0x12e));_0x3341e4['innerHTML']=_0x475237(0xde)+_0xb1ec22+_0x475237(0x11a)+_0x194186[_0x475237(0xe0)]+_0x475237(0xec)+_0x194186[_0x475237(0x10f)]+_0x475237(0x106)+_0x194186['to']+_0x475237(0x132)+_0x194186['date']+_0x475237(0x114)+_0x194186[_0x475237(0x11b)]+_0x475237(0xfe)+_0x194186[_0x475237(0x10a)]+_0x475237(0x120)+(_0x194186['message']||_0x475237(0x12f))+_0x475237(0x11f);}document[_0x46258f(0xeb)](_0x46258f(0xfd))[_0x46258f(0x100)](_0x46258f(0x129),async _0x3f2257=>{const _0x52b905=_0x46258f;_0x3f2257[_0x52b905(0x13a)]();const _0x1fa209=document[_0x52b905(0xeb)](_0x52b905(0xe0))[_0x52b905(0x133)],_0xb94378=parseInt(document[_0x52b905(0xeb)](_0x52b905(0x121))['value'],0xa),_0x2f745e=document[_0x52b905(0xeb)](_0x52b905(0x10f))[_0x52b905(0x133)],_0x5cd0e4=document[_0x52b905(0xeb)]('to')[_0x52b905(0x133)],_0x7c8105=document[_0x52b905(0xeb)](_0x52b905(0x12a))[_0x52b905(0x133)],_0x495a85=document[_0x52b905(0xeb)](_0x52b905(0x11b))[_0x52b905(0x133)],_0x340191=document[_0x52b905(0xeb)]('paymentMode')[_0x52b905(0x133)],_0x1ab293=document[_0x52b905(0xeb)](_0x52b905(0x115))[_0x52b905(0x133)],_0x4af160=getMaxStudents(_0x1fa209);if(_0xb94378>_0x4af160){alert(_0x52b905(0x112)+_0x4af160+_0x52b905(0x12c)+_0x1fa209+'.');return;}try{const _0x1ffdac=await addDoc(collection(db,_0x52b905(0x139)),{'car':_0x1fa209,'noOfStudents':_0xb94378,'from':_0x2f745e,'to':_0x5cd0e4,'date':_0x7c8105,'time':_0x495a85,'paymentMode':_0x340191,'message':_0x1ab293,'userId':auth[_0x52b905(0xf2)][_0x52b905(0x119)],'timestamp':new Date()});alert(_0x52b905(0x123)+_0x1ffdac['id']),displayCurrentBooking({'car':_0x1fa209,'from':_0x2f745e,'to':_0x5cd0e4,'date':_0x7c8105,'time':_0x495a85,'paymentMode':_0x340191,'message':_0x1ab293},_0x1ffdac['id']);}catch(_0x3c9b81){console[_0x52b905(0x103)](_0x52b905(0x13e),_0x3c9b81),alert(_0x52b905(0xf3));}});function getMaxStudents(_0x1ad409){const _0x3df14d=_0x46258f;switch(_0x1ad409){case'Tata\x20Zest':case _0x3df14d(0x11d):return 0x4;case'Innova':return 0x7;default:return 0x0;}}function _0x126e(_0x3a7d42,_0x420c57){const _0x451d52=_0x451d();return _0x126e=function(_0x126e1d,_0x19027a){_0x126e1d=_0x126e1d-0xde;let _0xf98648=_0x451d52[_0x126e1d];return _0xf98648;},_0x126e(_0x3a7d42,_0x420c57);}function _0x451d(){const _0xe0602a=['</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Cab\x20Name:\x20','9pjDdtv','1:621065707054:web:8b47875a751d361f2e09bf','Error\x20adding\x20document:\x20','Please\x20allow\x20camera\x20access\x20to\x20scan\x20QR\x20codes.\x20You\x20may\x20need\x20to\x20adjust\x20your\x20browser\x20settings.','email','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4>Current\x20Booking\x20(ID:\x20','href','car','log','3185KuEIaH','Error\x20starting\x20QR\x20code\x20scanning.','reader','3159560ybRBRd','bookingIdInput','estimatedPickTime','QR\x20Code\x20scanning\x20stopped.','../face/index.html','2068gfOCdP','getElementById','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>From:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Taxi\x20Number:\x20','NotAllowedError','phone','Error\x20stopping\x20QR\x20code\x20scanning.','none','currentUser','There\x20was\x20an\x20error\x20while\x20booking.\x20Please\x20try\x20again.','getUserMedia','Scanned\x20QR\x20Code:\x20','easycab-71fcf.firebaseapp.com','AIzaSyCDD_suBufBLAXzLjV0YPoIq1XU_nOVaBQ','cabName','trim','Camera\x20permissions\x20denied:','118461YSFQij','driverName','booking-form','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Payment\x20Mode:\x20','name','addEventListener','easycab-71fcf.appspot.com','987066sIQehQ','error','display','No\x20booking\x20found\x20with\x20this\x20ID.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>To:\x20','stop','stopScanBtn','N/A','paymentMode','click','data','1934475VRQhKs','2290014XujmFd','from','start','Please\x20enter\x20a\x20valid\x20Booking\x20ID.','You\x20can\x20select\x20a\x20maximum\x20of\x20','padStart','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Time:\x20','message','driverDetails','forEach','driver-info','uid',')</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Car:\x20','time','621065707054','Dzire','To\x20change\x20your\x20camera\x20settings,\x20go\x20to\x20your\x20browser\x20settings\x20and\x20allow\x20camera\x20access\x20for\x20this\x20site.','</p>\x20<!--\x20Default\x20message\x20if\x20undefined\x20-->\x0a\x20\x20\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Message:\x20','noOfStudents','userId','Booking\x20successful!\x20Booking\x20ID:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Estimated\x20Pick\x20Time:\x20','viewDriverDetailsBtn','block','style','location','submit','date','amount','\x20students\x20for\x20a\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4>Driver\x20Details</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Driver\x20Name:\x20','current-booking','No\x20message\x20provided','104qrwMef','username','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Date:\x20','value','innerText','https://easycab-71fcf-default-rtdb.firebaseio.com','24862GgetsJ','startScanBtn','load','bookings','preventDefault'];_0x451d=function(){return _0xe0602a;};return _0x451d();}document[_0x46258f(0xeb)](_0x46258f(0x125))['addEventListener'](_0x46258f(0x10b),async()=>{const _0x31151f=_0x46258f,_0x10adeb=document[_0x31151f(0xeb)](_0x31151f(0xe6))[_0x31151f(0x133)][_0x31151f(0xf9)]();if(!_0x10adeb){alert(_0x31151f(0x111));return;}const _0x470671=doc(db,'bookings',_0x10adeb),_0x32e4c5=await getDoc(_0x470671);if(_0x32e4c5['exists']()){const _0x518d17=_0x32e4c5[_0x31151f(0x10c)]();displayDriverDetails(_0x518d17);}else alert(_0x31151f(0x105));});function displayDriverDetails(_0x19a0b6){const _0x4453d1=_0x46258f,_0x495459=document['getElementById'](_0x4453d1(0x118)),_0x34284a=_0x19a0b6[_0x4453d1(0x116)]&&_0x19a0b6['driverDetails'][_0x4453d1(0xe7)]?formatTime(_0x19a0b6[_0x4453d1(0x116)]['estimatedPickTime']):'N/A',_0x1aa1c6=_0x19a0b6[_0x4453d1(0x116)]&&_0x19a0b6['driverDetails'][_0x4453d1(0x12b)]?_0x19a0b6[_0x4453d1(0x116)][_0x4453d1(0x12b)]:_0x4453d1(0x109);_0x495459['innerHTML']=_0x4453d1(0x12d)+(_0x19a0b6[_0x4453d1(0x116)]?.[_0x4453d1(0xfc)]||_0x4453d1(0x109))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Phone:\x20'+(_0x19a0b6[_0x4453d1(0x116)]?.[_0x4453d1(0xef)]||_0x4453d1(0x109))+_0x4453d1(0x13b)+(_0x19a0b6['driverDetails']?.[_0x4453d1(0xf8)]||_0x4453d1(0x109))+_0x4453d1(0xed)+(_0x19a0b6[_0x4453d1(0x116)]?.['taxiNumber']||_0x4453d1(0x109))+_0x4453d1(0x124)+_0x34284a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Amount:\x20'+_0x1aa1c6+_0x4453d1(0x120)+(_0x19a0b6[_0x4453d1(0x116)]?.['message']||_0x4453d1(0x12f))+'</p>\x20<!--\x20Updated\x20message\x20display\x20-->\x0a\x20\x20\x20\x20';}function formatTime(_0x336445){const _0x304a4e=_0x46258f;if(!_0x336445)return _0x304a4e(0x109);const [_0x40a709,_0x4edfbc]=_0x336445['split'](':'),_0x992a03=parseInt(_0x40a709,0xa),_0x4c1c85=_0x992a03>=0xc?'PM':'AM',_0x2620da=_0x992a03%0xc||0xc;return String(_0x2620da)[_0x304a4e(0x113)](0x2,'0')+':'+String(_0x4edfbc)['padStart'](0x2,'0')+'\x20'+_0x4c1c85;}const html5QrCode=new Html5Qrcode(_0x46258f(0xe4));async function checkCameraPermissions(){const _0x46e856=_0x46258f;try{const _0x229341=await navigator['mediaDevices'][_0x46e856(0xf4)]({'video':!![]});_0x229341['getTracks']()['forEach'](_0x11d258=>_0x11d258[_0x46e856(0x107)]()),startScanning();}catch(_0x1433b4){console[_0x46e856(0x103)](_0x46e856(0xfa),_0x1433b4),alert(_0x46e856(0x13f)),_0x1433b4[_0x46e856(0xff)]===_0x46e856(0xee)&&alert(_0x46e856(0x11e));}}async function startScanning(){const _0x25b63c=_0x46258f;try{await html5QrCode[_0x25b63c(0x110)]({'facingMode':'environment'},{'fps':0xa,'qrbox':0xfa},qrCodeSuccessCallback),document[_0x25b63c(0xeb)](_0x25b63c(0x137))['style'][_0x25b63c(0x104)]='none',document[_0x25b63c(0xeb)](_0x25b63c(0x108))[_0x25b63c(0x127)]['display']='block';}catch(_0x33d801){console[_0x25b63c(0x103)](_0x25b63c(0xe3),_0x33d801);}}function qrCodeSuccessCallback(_0x4ce30d,_0x23973d){const _0x20994f=_0x46258f;document[_0x20994f(0xeb)]('scan-result')[_0x20994f(0x134)]=_0x20994f(0xf5)+_0x4ce30d;}async function stopScanning(){const _0x43c515=_0x46258f;try{await html5QrCode[_0x43c515(0x107)](),console[_0x43c515(0xe1)](_0x43c515(0xe8)),document[_0x43c515(0xeb)]('stopScanBtn')['style']['display']=_0x43c515(0xf1),document[_0x43c515(0xeb)](_0x43c515(0x137))[_0x43c515(0x127)]['display']=_0x43c515(0x126);}catch(_0x2d7a3b){console['error'](_0x43c515(0xf0),_0x2d7a3b);}}window[_0x46258f(0x100)](_0x46258f(0x138),checkCameraPermissions);
